{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst galleryImg = new SimpleLightbox(\".gallery-link\", {\n    captionsData: 'alt',\n    aptionDelay: 250,\n});\nconst gallery = document.querySelector(\".gallery\");\nexport function markupGallery(images) {\n    const markup = images.map(\n        ({ largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads, }) => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\" /></a>\n  <div class=\"info\">\n        <p class=\"info-elem\">Likes<br> ${likes}</p>\n        <p class=\"info-elem\">Views<br> ${views}</p>\n        <p class=\"info-elem\">Comments<br> ${comments}</p>\n        <p class=\"info-elem\">Downloads<br> ${downloads}</p>\n  </div>\n</li>`).join(\"\");\n     gallery.insertAdjacentHTML(`beforeend`, markup);\n  galleryImg.refresh();\n}\nexport function cleanGallery() {\n  gallery.innerHTML = ``;\n}\n","import axios from \"axios\";\n\nconst API_KEY = \"49396849-83bcb41d8b5c3c417310bffba\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImages(query, page = 1, per_page) {\n    const {data} = await axios(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page,\n            per_page,\n        },\n    });\n    return data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { cleanGallery, markupGallery } from \"./js/render-functions\";\nimport { getImages } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst moreBtn = document.querySelector(\".btn-more\");\nconst per_page = 15;\nlet page = 1;\nlet requestData = \"\";\n\nform.addEventListener(\"submit\", formSubmit);\nmoreBtn.addEventListener(\"click\", nextGroup);\n\nasync function formSubmit(event) {\n    event.preventDefault();\n    requestData = event.currentTarget.elements.searchText.value.trim();\n    offMoreBtn();\n    if (!requestData) {\n        return;\n    }\n    page = 1;\n    cleanGallery();\n    onLoader();\n    try {\n        const { hits, totalHits } = await getImages(requestData, page, per_page);\n        if (hits.length === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\", position: \"topRight\",backgroundColor: \"#ef4040\",messageColor: \"#fff\",\n            });\n            return;\n        }\n        markupGallery(hits);\n        onMoreBtn();\n        if (page * per_page >= totalHits) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageColor: \"#fff\",\n                position: \"topRight\",\n\n            });\n            offMoreBtn();\n        }\n    } catch (error) {\n        iziToast.error({ message: \"Sorry, there are no images matching your search query. Please try again!\", position: \"topRight\",backgroundColor: \"#ef4040\",messageColor: \"#fff\", });\n    } finally {\n        form.reset();\n        offLoader();\n    }     \n}\nasync function nextGroup() {\n    onLoader();\n    page += 1;\n    try {\n        const { hits, totalHits } = await getImages(requestData, page, per_page) ;\n        markupGallery(hits);\n        const { height } = document.querySelector(\".gallery-item\").getBoundingClientRect();\n        window.scrollBy({ top: height * 2, behavior: \"smooth\" });\n        if (page * per_page >= totalHits) {\n            offMoreBtn();\n               iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageColor: \"#fff\",\n                position: \"topRight\",\n                backgroundColor: \"#2ABB7C\",\n            });\n        }\n\n    } catch {\n        iziToast.error({ message: \"Sorry, there are no images matching your search query. Please try again!\", position: \"topRight\",backgroundColor: \"#ef4040\",messageColor: \"#fff\", });\n\n    } finally {\n        offLoader();\n    }\n}\nfunction onLoader() {\n    loader.style.display = \"flex\";\n};\nfunction offLoader() {\n    loader.style.display = \"none\";\n};\nfunction onMoreBtn() {\n    moreBtn.style.display = \"block\";\n};\nfunction offMoreBtn() {\n   moreBtn.style.display = \"none\";\n};"],"names":["galleryImg","SimpleLightbox","gallery","markupGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cleanGallery","API_KEY","BASE_URL","getImages","query","page","per_page","data","axios","form","loader","moreBtn","requestData","formSubmit","nextGroup","event","offMoreBtn","onLoader","hits","totalHits","iziToast","onMoreBtn","offLoader","height"],"mappings":"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"}